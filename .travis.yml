language: node_js
dist: trusty
sudo: required
node_js: 6
script: npm test
cache:
  directories:
  - node_modules
env:
  global:
  - BX_APP=watson-conversation-duo-dev
  - BX_API=https://api.ng.bluemix.net
  - BX_ORGANIZATION=WatsonPlatformServices
  - BX_SPACE=demos
  - B_DOMAIN=ng.bluemix.net
  - secure: DYA04CYUyzD86/Obo/g3jEqn4rovvUOTFqwq4L3MqI2lKN4d7txJOSg6scHH9YmfOHZ7tQyJ+wKpGN/2iuhOxIZfITyBc213d+pic4GQ+M/2OgdO05s0nYlP4tkYBGP4byoJ+HSnrRk8A9wKx9OdAGRC0mu/rHq7udBhLn9FLhodVH8jAjcg4xyvyUnw819ioDgVkxNIYZFS36ErX0IlRX9KrxLWVNWmZ7j6dktxwcyNcM0t7PL0Z41vUwFRRDsPo8CefgY0z9/VfWVy1G4iYYF4qz1yRGXyrNJuV3aCfdNZOffcU6nQC9/unF4ghe0Fi/LAwbnOd4/xR1XS9yExR+uEEUO4bCTI/7SaG9FivkxEdSiC1SxiGm2/qgT7PI254o1+1hiL4IQQ4Jxp98gYUfpHTxtBbjh6bBbB1eCXkoi88ye5673pePv4xNlN9S5+trMrvDqv71NL4OM0jETQl9dsirz9ed/mURQzqYI2UJsHuIOqw/YIEr5bgo/tiihVe1yIap83547ibBtyewd7t7cZOgwXQzbtTsg+1cBtqxPtLSAVsKmkEh75f5J3zSr+CQT4TP1+5C6pMqhreolzFzvkrvqT62+PdAv9hhv7Dd3VUdfNWHCpPXsHv1dtgYIq7w60SEBzn2uuPDH4Rqj0Ke63FGSMeQ/JqOodbRSAPRQ=
  - secure: BThlMaH42iHR2cCOLe4Ud/tBKE/0fycl3hhLzIAFg3CmdWk6j26QCXmn9l97cG+c+Sftwp6o2sqTRo4gumtDhvAlM3YWCllG+8oPIr6eUk/iHLm/ac/T7JuYw4ve01Xc69AK0Y71dczyzr/sm7uEDw+GCkCiiaF5VxUtrSni2gw3BC5p5jS8NHbwrBZoite72P3pDRNzK/eXCDf6Lizeyqws0UNRXWXivwB7GtSwZU152+IiHN2EwP51tKeWTnZlGqlkp5QRXr4qazE8yortylcsww/7SLdaMpqu6POaukseq0KtRM0E32pNDzK8Pd22vHGnog2uIVZ3sJTm0UgZu5/MmVriQV4Mo3HoCobiL3QNNfA1t/NRo4ODyxFkW6AfGZxg0leZpK5nUztzS5pKsS5zjxbL2TuSYnUsRU8T9I+Yy2mG2Ztv495P1KRGE45Yr65pq9E8Dy6Rebz1DbSMFgWbEGrs8IkxAAw1+5OZ2e2VxKvMYfxpuvOdp578Op98G3J06xOeP4HqpWKedrbSkf0r+esJxP+5hhINU5Om34/cqcBYJuvwbW7qawa+WLO1W9Ixb9eVNXlcuX8DIy8B69/KM8Z6+d+NnFkf0GveaVZoNZm4Z4Vv9MZP0gdsVsGTW0C7GVMNTriwca7Ap+X6mfmVg1vE1xXkPIIN551G3IE=
before_install:
- openssl aes-256-cbc -K $encrypted_cdd14ff783eb_key -iv $encrypted_cdd14ff783eb_iv
  -in .env.enc -out .env -d
before_deploy:
- npm install -g https://github.com/andresfvilla/bx-blue-green
- npm run build
deploy:
- provider: script
  script: bx-blue-green-travis
  on:
    branch: master
    repo: Watson/watson-conversation-demo-redesign
  skip_cleanup: true
