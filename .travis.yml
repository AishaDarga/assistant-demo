language: node_js
dist: trusty
sudo: required
node_js: 6
script: npm test
cache:
  directories:
  - node_modules
env:
  global:
  - BX_APP=watson-conversation-duo-dev
  - BX_API=https://api.ng.bluemix.net
  - BX_ORGANIZATION=WatsonPlatformServices
  - BX_SPACE=demos
  - B_DOMAIN=ng.bluemix.net
  - secure: DYA04CYUyzD86/Obo/g3jEqn4rovvUOTFqwq4L3MqI2lKN4d7txJOSg6scHH9YmfOHZ7tQyJ+wKpGN/2iuhOxIZfITyBc213d+pic4GQ+M/2OgdO05s0nYlP4tkYBGP4byoJ+HSnrRk8A9wKx9OdAGRC0mu/rHq7udBhLn9FLhodVH8jAjcg4xyvyUnw819ioDgVkxNIYZFS36ErX0IlRX9KrxLWVNWmZ7j6dktxwcyNcM0t7PL0Z41vUwFRRDsPo8CefgY0z9/VfWVy1G4iYYF4qz1yRGXyrNJuV3aCfdNZOffcU6nQC9/unF4ghe0Fi/LAwbnOd4/xR1XS9yExR+uEEUO4bCTI/7SaG9FivkxEdSiC1SxiGm2/qgT7PI254o1+1hiL4IQQ4Jxp98gYUfpHTxtBbjh6bBbB1eCXkoi88ye5673pePv4xNlN9S5+trMrvDqv71NL4OM0jETQl9dsirz9ed/mURQzqYI2UJsHuIOqw/YIEr5bgo/tiihVe1yIap83547ibBtyewd7t7cZOgwXQzbtTsg+1cBtqxPtLSAVsKmkEh75f5J3zSr+CQT4TP1+5C6pMqhreolzFzvkrvqT62+PdAv9hhv7Dd3VUdfNWHCpPXsHv1dtgYIq7w60SEBzn2uuPDH4Rqj0Ke63FGSMeQ/JqOodbRSAPRQ=
  - secure: V/BBVoZ/v4PVIatufAXZehJxnDnzEtKX1qgy/TiPjpmpuqpgicQMQftxP4M2wGHOyc26m+kLX9w4FIb4dU2dbh31lpB7Ga0NaYeaVp+fPZ6hZgMb1XznNIgmtuTcQDq+Ezgh7U5GvNQafB5u5vI7/Xt7anXwmQIifjHdo+v8nYwY8K/tMM2YjWR/o3R4TRPIFeiIiSNCiquynn0yFz7KnWtkPnU6kgk1rnUw0u+2qqlQejb5SAcp0Jr2gdMevdhNFLWHQIksuCi182zghKzruOVmV0vMwPG141wfP3ZPIJRumsrb0v5gMTRxAhlfX6kmPrfiq4mdrw+j+nrfP0MG43iQ+B1Ts9xF4Wk/O5hgGXT0bhcbFMghsVn5sHwcF7UwFluRcy+tdoOVIV2ZZ5kXJ3fPDvbjt8CYe8qjRLAr4rDh1QAXzozf10rMMmJfNNu9WEQu2CLrBUeLQuMZSEk4T0HSTpGlV2WCu6tDbucjQcZIo7f7slWmUpbrqMfK0PVGD3yNDxLdimQXriBKouByIVk7Bgmz7x2WQe3G+8M5YVZXnfzxlm0A0UsxdKGWcoBtdJaUyhfOybgV8PzBPLO3gQbqkyMDKzvKaWAZNl/yPEzGJpiU+MrOefc8LaYt0xUeHOyFbM7OxgXBnDC7v7CLPCn7zqQIMxsgwPoqHdCKV7w=
before_install:
- openssl aes-256-cbc -K $encrypted_cdd14ff783eb_key -iv $encrypted_cdd14ff783eb_iv
  -in .env.enc -out .env -d
before_deploy: 
  - npm install -g https://github.com/andresfvilla/bx-blue-green
  - npm run build
deploy:
- provider: script
  script: bx-blue-green-travis
  on:
    branch: master
    repo: Watson/watson-conversation-demo-redesign
  skip_cleanup: true
